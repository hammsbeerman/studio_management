<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title">Adjust Credit</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
  </div>

  <form hx-post="{% url 'finance:adjust_credit' %}"
        hx-headers='{"X-CSRFToken":"{{ csrf_token }}"}'
        hx-swap="none">
    <div class="modal-body">
      <input type="hidden" name="kind" value="{{ kind }}">
      <input type="hidden" name="id" value="{% if payment %}{{ payment.id }}{% elif credit_memo %}{{ credit_memo.id }}{% else %}{{ giftcert.id }}{% endif %}">

      <div class="alert alert-warning">
        This reduces the available credit without voiding the original transaction.
        <div class="mt-1">Current available: <strong>{{ available|floatformat:2 }}</strong></div>
      </div>

      <div class="mb-2">
        <label class="form-label">Adjustment amount</label>
        <input class="form-control" type="number" step="0.01" min="0.01" name="amount" required>
      </div>

      <div class="mb-0">
        <label class="form-label">Reason (optional)</label>
        <input class="form-control" type="text" name="reason" placeholder="rounding / write-off / correction">
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      <button type="submit" class="btn btn-danger">Adjust</button>
    </div>
  </form>
</div>
