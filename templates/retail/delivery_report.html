{% extends "base.html" %}

{% block content %}
<h4>Delivery Report</h4>

<form
  id="delivery-report-filter"
  method="get"
  class="mb-3"
  hx-get="{% url 'retail:delivery_report' %}"
  hx-target="#delivery-report-table"
  hx-swap="outerHTML"
  hx-trigger="change from:input[name='date']"
>
  <label class="form-label small mb-1">Filter by date</label>
  <div class="input-group input-group-sm" style="max-width: 260px;">
    <input
      type="date"
      name="date"
      class="form-control"
      value="{{ selected_date|date:'Y-m-d' }}"
    >
    <button class="btn btn-outline-secondary" type="submit">
      Apply
    </button>
  </div>
</form>


  {% include "retail/partials/delivery_report_table.html" %}

  <div class="modal fade" id="modal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div id="dialog">
      <!-- your modal-content (the snippet you pasted) gets swapped in here -->
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}

<script>
  document.body.addEventListener("CustomerAdded", function (event) {
    const modalEl = document.getElementById("modal");
    if (!modalEl) return;

    // Get existing Bootstrap instance or bail
    const modal = bootstrap.Modal.getInstance(modalEl);
    if (modal) {
      modal.hide();
    }
  });
</script>

{% endblock scripts%}